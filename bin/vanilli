#!/usr/bin/env node

var path = require('path'),
    fs = require('fs'),
    argv = require('optimist')
        .usage('Usage: $0 --port [num] --logLevel [debug|info|warn|error]')
        .demand('port')
        .describe('port', 'Port to run Vanilli on')
        .describe('logLevel', 'Log level')
        .default('logLevel', 'info')
        .argv,
    port = argv.port,
    logLevel = argv.logLevel,
    dir = path.resolve(process.cwd(), 'node_modules', 'vanilli', 'lib');

if (!fs.existsSync(dir)) {
  dir = path.join('..', 'lib');
}

require(path.join(dir, 'vanilli'))
    .init({ logLevel: logLevel })
    .listen(port);
